'use strict';

const test = require('ava');
const {getCodepenHtml, getCodepenJs} = require('../src/getCodepen');

test('get Codepen JS code', (t) => {
  t.deepEqual(getCodepenJs(), '<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>');
});

test('get Codepen HTML code with empty option', (t) => {
  t.throws(() => {
    getCodepenHtml();
  }, {instanceOf: TypeError});
});

test('get Codepen HTML code with parameters & id', (t) => {
  const options = {
    'class': '',
    'height': 650,
    'theme': '',
    'tab': 'result',
    'insertJS': false};
  const url = 'MWEOBPO';
  t.deepEqual(getCodepenHtml(options, url), `<p class="codepen"
  data-class=""
  data-height="650"
  data-theme-id=""
  data-default-tab="result"
  data-slug-hash="MWEOBPO">
<span><a href="https://codepen.io//pen/MWEOBPO">See the Pen </a></span></p>`);
});

test('get Codepen HTML code with parameters & url', (t) => {
  const options = {
    'class': '',
    'height': 550,
    'theme': '',
    'tab': 'result',
    'insertJS': false};
  const url = 'https://codepen.io/alvaromontoro/pen/MWEOBPO';
  t.deepEqual(getCodepenHtml(options, url), `<p class="codepen"
  data-class=""
  data-height="550"
  data-theme-id=""
  data-default-tab="result"
  data-slug-hash="MWEOBPO">
<span><a href="https://codepen.io/alvaromontoro/pen/MWEOBPO">See the Pen </a></span></p>`);
});

test('get Codepen HTML code with JS code', (t) => {
  const options = {
    'class': '',
    'height': 550,
    'theme': '',
    'tab': 'result',
    'insertJS': true};
  const url = 'https://codepen.io/alvaromontoro/pen/MWEOBPO';
  t.deepEqual(getCodepenHtml(options, url), `<p class="codepen"
  data-class=""
  data-height="550"
  data-theme-id=""
  data-default-tab="result"
  data-slug-hash="MWEOBPO">
<span><a href="https://codepen.io/alvaromontoro/pen/MWEOBPO">See the Pen </a></span></p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>`);
});
